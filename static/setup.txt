

# Include our fe plugin class
includeLibs.tx_wecsermons= EXT:wec_sermons/pi1/class.tx_wecsermons_pi1.php

plugin.tx_wecsermons_pi1 = USER
plugin.tx_wecsermons_pi1 {

	userFunc = tx_wecsermons_pi1->main

	CMD =
	detailTable =
	groupTable =

	pidList = {$plugin.tx_wecsermons_pi1.pidList}
	recursive =

	useStoragePid  = {$plugin.tx_wecsermons_pi1.useStoragePid}
	pidSingleView = {$plugin.tx_wecsermons_pi1.pidSingleView}
	pidListView = {$plugin.tx_wecsermons_pi1.pidListView}
	pidSearchView = {$plugin.tx_wecsermons_pi1.pidSearchView}

	# Whether the extension caches content or not
	allowCaching = {$plugin.tx_wecsermons_pi1.allowCaching}

	# Rendering of text items. re-use the RTE parseFunc configuration for normal content
	general_stdWrap {
		parseFunc < tt_content.text.20.parseFunc
	}

	# General wrap for dates in the wec_sermons extension
	general_dateWrap {
		strftime = %A, %b %d %Y
	}

	stdHeader = COA
	stdHeader {
		10 = TEXT
		10.field = title
		10.dataWrap = <div class="csc-header csc-header-n{cObj:parentRecordNumber}">|</div>
		10.fieldRequired = title
		10.prefixComment = 2 | Header:
	}

	# Marker based template file, which defines each view
	templateFile = {$plugin.tx_wecsermons_pi1.file.templateFile}

	# List of tables that any view can be generated from
	allowedTables = tx_wecsermons_sermons,tx_wecsermons_series,tx_wecsermons_resources,tx_wecsermons_topics,tx_wecsermons_seasons,tx_wecsermons_speakers,tx_wecsermons_resources

	#	The subpart marker used to define resources of type 'default'
	defaultMarker = ###DEFAULT_RESOURCES###
	defaultTemplate = ###TEMPLATE_DEFAULT_RESOURCES###
	
	# Bitrate is used to calculate the duration of an audio file
	bitrate = {$plugin.tx_wecsermons_pi1.bitrate}
		
	# ***************************
	# Resource Types CASE cObject
	# ***************************
	
	# Resource types are identified by thier typoscript_object_name field, and render content for the ###RESOURCE_CONTENT### template marker
	resource_types = CASE
	resource_types {

		# Use the field 'typoscript_object_name' on a tx_wecsermons_resources record
		key.field = typoscript_object_name

		# MP3 Audio
		MP3 = COA
		MP3 {
			10 = < plugin.tx_wecsermons_pi1.stdHeader

			20 < plugin.tx_wecflashplayer_pi2
			20 {
				audiobase.value = uploads/tx_wecsermons/
				audiofile.setCurrent.field = file
				audiofile.setCurrent.listNum = 0
				audiofile.current = 1
			}

			30 = TEXT
			30.field = description
			30.parseFunc < plugin.tx_wecsermons_pi1.general_stdWrap.parseFunc

			wrap = <div class="tx-wecsermons-pi1-mp3">|</div>
		}

		# Flash video
		FLV = COA
		FLV {

			10 = < plugin.tx_wecsermons_pi1.stdHeader

			20 < plugin.tx_wecflashplayer_pi1
			20 {
				videobase.value = uploads/tx_wecsermons/
				videohigh.setCurrent.field = file
				videohigh.setCurrent.listNum = 0
				videohigh.current = 1
				videolow.setCurrent.field = file
				videolow.setCurrent.listNum = 1
				videolow.current = 1
			}

			30 = TEXT
			30.field = description
			30.parseFunc < plugin.tx_wecsermons_pi1.general_stdWrap.parseFunc

			wrap = <div class="tx-wecsermons-pi1-flv">|</div>
		}

		# PDF (Portable Document)
		PDF = COA
		PDF {
			10 = IMAGE
			10 {

				prefixComment = 2 | PDF Preview:
				altText.field = title
				file.import = uploads/tx_wecsermons/
				file.import.field = file
				file.width = 150m
				file.height  = 150m
				wrap = <div class="tx-wecsermons-pi1-pdf-preview" style="float: left;">|</div>
				stdWrap.typolink {
					parameter = uploads/tx_wecsermons/{field:file}
					parameter {
						setCurrent.field = file
						setCurrent.listNum = 0
						insertData = 1
					}
				}
			}

			20 = TEXT
			20.prefixComment = 2 | PDF File Link:
			20.field = title
			20.typolink {
				parameter = uploads/tx_wecsermons/{field:file}
				parameter.insertData = 1
			}
			20.wrap = <p class="bodytext">|</p>

			30 = TEXT
			30.field = description
			30.parseFunc < plugin.tx_wecsermons_pi1.general_stdWrap.parseFunc

			wrap = <div class="tx-wecsermons-pi1-pdf">|</div>
		}

		# WEC Discussion plugin
		discussion < plugin.tx_wecdiscussion_pi1


		news < plugin.tt_news
		news {
			code >
			code = SINGLE
			substitutePagetitle = 0
			templateFile = EXT:wec_sermons/res/tt_news_v2_template.html
		}

		poll < plugin.tx_jkpoll_pi1
		poll {
			type = 1
		}

		JPG = COA
		JPG {
			10 = IMAGE
			10.import = uploads/tx_wecsermons/
			10.import.field = graphic
			10.width = 150px

			# Caption
			20 = TEXT
			20.field = title
			20.required = 1
			20.fontTag = <div class="tx-wecsermons-pi1-jpg-caption">|</div>

			wrap = <div class="tx-wecsermons-pi1-jpg">|</div>
		}
		
		downloadfile = TEXT
		downloadfile {
			field = title
			typolink {
				parameter = uploads/tx_wecsermons/{field:file}
				parameter {
					setCurrent.field = file
					setCurrent.listNum = 0
					insertData = 1
				}
			}
		}

		downloadgraphic = COA
		downloadgraphic {
			10 = IMAGE
			10 {

				prefixComment = 2 | Graphic Preview:
				altText.field = title
				file.import = uploads/tx_wecsermons/
				file.import.field = file
				file.width = 150m
				file.height  = 150m
				wrap = <div class="tx-wecsermons-pi1-graphic-preview">|</div>
				stdWrap.typolink {
					parameter = uploads/tx_wecsermons/{field:file}
					parameter {
						setCurrent.field = file
						setCurrent.listNum = 0
						insertData = 1
					}
				}
			}
			
			20 = TEXT
			20.field = title
		}
		
		# This is the 'Default' resource type. This rendering will be used if the proper key has not been defined for the resource you are rendering.
		# To define a new resource key, create a new property within the plugin.tx_wecsermons_pi1.resource_types CASE cObject. You can use the 'default' property as a starting point.
		default = COA
		default {

			10 = < plugin.tx_wecsermons_pi1.stdHeader

			20 = TEXT
			20.field = file
			20.listNum = 0
			20.typolink = 1
			20.typolink {
				parameter = uploads/tx_wecsermons/{current:1}
				parameter.setCurrent.field = file
				parameter.setCurrent.listNum = 0
				parameter.insertData = 1
				extTarget = _blank
			}

		}

	}

	# *****************
	# Single view configuration
	# *****************
	singleView {

		back = TEXT
		back {
			value = Return
			parseFunc < plugin.tx_wecsermons_pi1.general_stdWrap.parseFunc
		}

		# Specify which layout will be used, also can be set in the front-end plugin
		layoutCode =

		# General formatting of a date in list view.
		# You may override the global date formatting by specifying a format at this level
		general_dateWrap.strftime = 

		tx_wecsermons_sermons {

			# Wrap for the title column
			title = TEXT
			title {
				wrap = |
				field = title
			}

			# Specific date wrap for the occurrence_date column in tx_wecsermons_sermons table
			occurrence_date = TEXT
			occurrence_date {
				wrap = |
				field = occurrence_date
			}

			description = TEXT
			description {
				parseFunc < plugin.tx_wecsermons_pi1.general_stdWrap.parseFunc
				field = description
			}

			scripture = TEXT
			scripture {
				typolink {
					parameter = http://www.biblegateway.com/passage/?search={current:1}&version=31;&interface=print
					parameter.setCurrent.field = scripture
					parameter.setCurrent.rawUrlEncode = 1
					parameter.insertData = 1
					extTarget = _blank
				}
				field = scripture
			}

			graphic = IMAGE
			graphic {
			wrap = |
				file {
					import = uploads/tx_wecsermons/
					import.field = graphic
					width = 128m
					height = 128m
				}
				imageLinkWrap = 1
				imageLinkWrap {
					enable = 1
					JSwindow = 1
					JSwindow.expand = 20,20
				}
			}

			topics = TEXT
			topics {
				innerWrap = {$plugin.tx_wecsermons_pi1.topicsHeader}
				innerWrap.wrap = |<br/>
				innerWrap.required = 1

				wrap = <div class="tx-wecsermons-pi1-sermon-topics">|</div>
			}

			speakers = TEXT
			speakers {
				innerWrap = {$plugin.tx_wecsermons_pi1.speakersHeader}
				innerWrap.wrap = |<br/>
				innerWrap.required = 1

				wrap = <div class="tx-wecsermons-pi1-sermon-speakers">|</div>

			}

			series = TEXT
			series {
				innerWrap = {$plugin.tx_wecsermons_pi1.seriesHeader}
				innerWrap.wrap = |<br/>
				innerWrap.required = 1

				wrap = <div class="tx-wecsermons-pi1-sermon-series">|</div>
			}

		}

		tx_wecsermons_resources {

			# If typolink = 0, then links to the single view of a resource.
			typolink = 1
			typolink {
				parameter = uploads/tx_wecsermons/{current:1}
				parameter.setCurrent.field = file
				parameter.setCurrent.listNum = 0
				parameter.insertData = 1
				extTarget = _blank
			}

			# resource_types properties define whether to render the ###RESOURCE_LINK### tag as a link to the resources' single view, or by a typolink configuration.
			# See the TSRef for details on the typolink data type: http://typo3.org/documentation/document-library/references/doc_core_tsref/current/view/5/8/
			resource_types {

				# Type PDF
				PDF.typolink < plugin.tx_wecsermons_pi1.singleView.tx_wecsermons_resources.typolink

				MP3.typolink < plugin.tx_wecsermons_pi1.singleView.tx_wecsermons_resources.typolink
			
				News.typolink < plugin.tx_wecsermons_pi1.singleView.tx_wecsermons_resources.typolink
				News.singlePid = 

				# Default resource type, links to the first file in the list
				default {
					typolink < plugin.tx_wecsermons_pi1.singleView.tx_wecsermons_resources.typolink

				}
			}

			title = TEXT
			title.field = title
			title.wrap = <dl><dt>|<dt>

			file = TEXT
			file.field = file
			file.listNum = 0
			file.wrap = <dd>|</dd></dl>

			graphic = IMAGE
			graphic {
				wrap = <div class="tx-wecsermons-pi1-pi1-resource-graphic">|<div>
				file {
					import = uploads/tx_wecsermons/
					import.field = graphic
					width = 32m
					height = 32m
				}
				imageLinkWrap = 1
				imageLinkWrap {
					enable = 1
					JSwindow = 1
					JSwindow.expand = 20,20
				}
			}

			description = TEXT
			description {
				parseFunc < tt_content.text.20.parseFunc
				field = description
			}

			webaddress1 = TEXT
			webaddress1.typolink.parameter.field = webaddress1

			webaddress2 = TEXT
			webaddress2.typolink.parameter.field = webaddress3

			webaddress3 = TEXT
			webaddress3.typolink.parameter.field = webaddress3


		}

		tx_wecsermons_series {

			title = TEXT
			title {
				wrap = |
				field = title
			}

			graphic = IMAGE
			graphic {
			wrap = |
				file {
					import = uploads/tx_wecsermons/
					import.field = graphic
					width = 128m
					height = 128m
				}
				imageLinkWrap = 1
				imageLinkWrap {
					enable = 1
					JSwindow = 1
					JSwindow.expand = 20,20
				}
			}

			description = TEXT
			description {
				parseFunc < tt_content.text.20.parseFunc
				field = description
			}

			scripture = TEXT
			scripture {
				typolink {
					parameter = http://www.biblegateway.com/passage/?search={current:1}&version=31;&interface=print
					parameter.setCurrent.field = scripture
					parameter.setCurrent.rawUrlEncode = 1
					parameter.insertData = 1
					extTarget = _blank
				}		
				field = scripture
			}

			topics = TEXT
			topics {
				innerWrap = {$plugin.tx_wecsermons_pi1.topicsHeader}
				innerWrap.wrap = |<br/>
				innerWrap.required = 1

				wrap = <div class="tx-wecsermons-pi1-sermon-topics">|</div>
			}

			startdate = TEXT
			startdate {
				innerWrap = {$plugin.tx_wecsermons_pi1.seriesStartDateHeader}
				innerWrap.wrap = |&nbsp;
				innerWrap.required = 1

				wrap = |
				field = startdate
			}

			enddate = TEXT
			enddate {
				innerWrap = {$plugin.tx_wecsermons_pi1.seriesEndDateHeader}
				innerWrap.wrap = |&nbsp;
				innerWrap.required = 1

				wrap = |
				field = enddate
			}

			season = TEXT
			season {
				innerWrap = {$plugin.tx_wecsermons_pi1.seasonHeader}
				innerWrap.wrap = |<br/>
				innerWrap.required = 1

				wrap = <div class="tx-wecsermons-pi1-sermon-season">|</div>
			}

		}

		tx_wecsermons_speakers {

			# If typolink is set, then we use this configuration to generate the link for the ###SPEAKER_LINK### TYPO tag.
			# If typolink = 0, then we generate a link to the speaker's single view
			typolink = 0
			typolink {
				parameter.field = url
				extTarget = _blank
			}

			photo = IMAGE
			photo {
			wrap = |
				file {
					import = uploads/tx_wecsermons/
					import.field = photo
					width = 128m
					height = 128m
				}
				imageLinkWrap = 1
				imageLinkWrap {
					enable = 1
					JSwindow = 1
					JSwindow.expand = 20,20
				}
			}

			fullname = TEXT
			fullname {
				wrap = |
				field = fullname
			}

			firstname = TEXT
			firstname {
				wrap = |
				field = firstname
			}

			lastname = TEXT
			lastname {
				wrap = |
				field = lastname
			}

			url = TEXT
			url {
				wrap = |
				typolink = 1
				typolink {
					parameter.field = url
					extTarget = _blank
				}
				field = url
			}

			email = TEXT
			email {
				typolink = 1
				typolink.parameter.field = email
				wrap = |
				parseFunc < tt_content.text.20.parseFunc
				field = email

			}
		}

		tx_wecsermons_topics {

			title = TEXT
			title {
				wrap = |
				field = title
			}

			description = TEXT
			description {
				parseFunc < tt_content.text.20.parseFunc
				field = description
			}
		}

		tx_wecsermons_seasons {

			title = TEXT
			title {
				wrap = |
				field = title
			}

			description = TEXT
			description {
				parseFunc < tt_content.text.20.parseFunc
				field = description
			}

		}

	}

	# *****************
	# List View Configuration
	# *****************
	listView {

		# Start date filter, which is applied to the list omiting all dates previous to the date set
		startDate =

		# End date filter, applied to the list omiting all dates later than the date set
		endDate =

		# Specify which layout will be used, also can be set in the front-end plugin
		layoutCode =

		# *****************
		# Browse Box Settings
		#
		# See http://typo3.org/fileadmin/typo3api-4.0.0/df/d32/classtslib__pibase.html#ba8eebaed52748cdf9acb31562295378
		# *****************

		# Whether the active page is a clickable link or text only
		dontLinkActivePage =
	
		# A boolean switch if the two links named "<< First" and "LAST >>" will be shown and point to the first or last page.
		showFirstLast =
	
		# Defines where the current page is shown in the list of pages in the Pagebrowser. If this var is an integer it will be interpreted as position in the list of pages. If its value is the keyword "center" the current page will be shown in the middle of the pagelist.
		pagefloat =
	
		# A boolean swith that displays the pagelinks in ranges f.e.: 1-5 6-10 11-15... instead of 1 2 3...
		showRange =
	
	 	# An integer switch that determines how the results browser will be rendered
		#
		# 1: (default) the text "Displaying results..." and the result-browser will be rendered.
		# 2: only the text "Displaying results..." will be shown
		showResultCount = 1
	
		# *******************
		# Browse Box Link Wraps
		# *******************
		browseBox_linkWraps {
	
			disabledLinkWrap = <td nowrap="nowrap"><p>|</p></td>
			inactiveLinkWrap = <td nowrap="nowrap"><p>|</p></td>
			activeLinkWrap = <td class="tx-wecsermons-pi1-browsebox-SCell" nowrap="nowrap"><p>|</p></td>
			browseLinksWrap = <table><tr>|</tr></table>
			showResultsWrap = <p>|</p>
			browseBoxWrap (
				<!--
				List browsing box:
				-->
				<div class="tx-wecsermons-pi1-browsebox">|</div>
			)
		}
		
		# How many results to show on each page
		maxdetailResults = {$plugin.tx_wecsermons_pi1.listView.maxdetailResults}
		maxGroupResults = {$plugin.tx_wecsermons_pi1.listView.maxGroupResults}
		emptyGroups = {$plugin.tx_wecsermons_pi1.listView.emptyGroups}

		# Maximum number of pages that are shown in the page browser
		maxPages = {$plugin.tx_wecsermons_pi1.listView.maxPages}

		# A string value appended to the CSS class name of odd rows of a list, [tx-wecsermons-pi1-{alternatingClass}]
		alternatingClass = {$plugin.tx_wecsermons_pi1.listView.alternatingClass}

		# General formatting of a date in list view.
		# You may override the global date formatting by specifying a format at this level
		general_dateWrap.strftime = 

		tx_wecsermons_sermons {

			# Allowed data columns to search in
			searchFieldList = title,description,scripture,keywords

			# Define ordering configuration for this table
			# orderBy should only include one field!
			orderByList = occurrence_date,title,description,crdate
			orderBy = occurrence_date
			descFlag = 1

			# Wrap for the title column
			title = TEXT
			title {
				wrap = |
#				parseFunc < tt_content.text.20.parseFunc
				field = title
			}

			# Specific date wrap for the occurrence_date column in tx_wecsermons_sermons table
			occurrence_date = TEXT
			occurrence_date {
				wrap = |
				field = occurrence_date
			}

			description = TEXT
			description {
				crop = 75| &nbsp;...|1
				stripHtml = 1
				trim = 1
				wrap = <p class='bodytext'>|</p>
				field = description
			}

			scripture = TEXT
			scripture {
				typolink {
					parameter = http://www.biblegateway.com/passage/?search={current:1}&version=31;&interface=print
					parameter.setCurrent.field = scripture
					parameter.setCurrent.rawUrlEncode = 1
					parameter.insertData = 1
					extTarget = _blank
				}
				field = scripture
			}

			graphic = IMAGE
			graphic {
			wrap = |
				file {
					import = uploads/tx_wecsermons/
					import.field = graphic
					width = 128m
					height = 128m
				}
				imageLinkWrap = 1
				imageLinkWrap {
					enable = 1
					JSwindow = 1
					JSwindow.expand = 20,20
				}
			}

			topics = TEXT
			topics {
				innerWrap = {$plugin.tx_wecsermons_pi1.topicsHeader}
				innerWrap.wrap = |<br/>
				innerWrap.required = 1

				wrap = <div class="tx-wecsermons-pi1-topics">|</div>
			}

			series = TEXT
			series {
				innerWrap = {$plugin.tx_wecsermons_pi1.seriesHeader}
				innerWrap.wrap = |<br/>
				innerWrap.required = 1

				wrap = <div class="tx-wecsermons-pi1-series">|</div>
			}

			speakers = TEXT
			speakers {
				innerWrap = {$plugin.tx_wecsermons_pi1.speakersHeader}
				innerWrap.wrap = |<br/>
				innerWrap.required = 1

				wrap = <div class="tx-wecsermons-pi1-speakers">|</div>

			}

		}

		tx_wecsermons_resources {

			# If typolink = 0, then links to the single view of a resource.
			typolink = 0
			typolink {
				parameter = uploads/tx_wecsermons/{current:1}
				parameter.setCurrent.field = file
				parameter.setCurrent.listNum = 0
				parameter.insertData = 1
				extTarget = _blank
			}

			# resource_types properties define whether to render the ###RESOURCE_LINK### tag as a link to the resources' single view, or by a typolink configuration.
			# See the TSRef for details on the typolink data type: http://typo3.org/documentation/document-library/references/doc_core_tsref/current/view/5/8/
			resource_types {

				PDF.typolink < plugin.tx_wecsermons_pi1.listView.tx_wecsermons_resources.typolink

				DOC.typolink < plugin.tx_wecsermons_pi1.listView.tx_wecsermons_resources.typolink

				MP3.typolink < plugin.tx_wecsermons_pi1.listView.tx_wecsermons_resources.typolink

				discussion.typolink < plugin.tx_wecsermons_pi1.listView.tx_wecsermons_resources.typolink

				# Default resource type.
				default.typolink < plugin.tx_wecsermons_pi1.listView.tx_wecsermons_resources.typolink

			}

			# Allowed data columns to search in
			searchFieldList = title,description,file,webaddress1,webaddress2,webaddress3

			# Define ordering configuration for this table
			# orderBy should only include one field!
			orderByList = title,description,crdate
			orderBy = title

			# Boolean, if set = 1 then order descending
			descFlag = 1

			title = TEXT
			title.field = title

			graphic = IMAGE
			graphic {
				file {
					import = uploads/tx_wecsermons/
					import.field = graphic
					width = 64m
					height = 64m
				}
				imageLinkWrap = 1
				imageLinkWrap {
					enable = 1
					JSwindow = 1
					JSwindow.expand = 20,20
				}

			}

			description = TEXT
			description {
				field = description
				crop = 150| &nbsp;...|1
				stripHtml = 1
				trim = 1
				wrap = <p class="bodytext">|</p>
			}


			webaddress1 = TEXT
			webaddress1.typolink.parameter.field = webaddress1

			webaddress2 = TEXT
			webaddress2.typolink.parameter.field = webaddress3

			webaddress3 = TEXT
			webaddress3.typolink.parameter.field = webaddress3

			file = TEXT
			file.field = file
			file.listNum = 0

		}

		tx_wecsermons_series {

			# Allowed data columns to search in
			searchFieldList = title,description,scripture,keywords

			# Specify the ordering of records in list views
			# orderBy should only include one field!
			orderByList = title,startdate,enddate,season,crdate
			orderBy = startdate

			# Boolean, if set = 1 then order descending
			descFlag = 1

			title = TEXT
			title {
				wrap = |
				field = title
			}

			graphic = IMAGE
			graphic {
			wrap = |
				file {
					import = uploads/tx_wecsermons/
					import.field = graphic
					width = 64m
					height = 64m
				}
				imageLinkWrap = 1
				imageLinkWrap {
					enable = 1
					JSwindow = 1
					JSwindow.expand = 20,20
				}
			}


			description = TEXT
			description {
				crop = 150| &nbsp;...|1
				field = description
				stripHtml = 1
				trim = 1
				wrap = <p class="bodytext">|</p>
			}

			scripture = TEXT
			scripture {
				typolink {
					parameter = http://www.biblegateway.com/passage/?search={current:1}&version=31;&interface=print
					parameter.setCurrent.field = scripture
					parameter.setCurrent.rawUrlEncode = 1
					parameter.insertData = 1
					extTarget = _blank
				}
				field = scripture
			}

			topics = TEXT
			topics {
				innerWrap = {$plugin.tx_wecsermons_pi1.topicsHeader}
				innerWrap.wrap = |<br/>
				innerWrap.required = 1

				wrap = |
			}

			startdate = TEXT
			startdate {
				innerWrap = {$plugin.tx_wecsermons_pi1.seriesStartDateHeader}
				innerWrap.wrap = |&nbsp;
				innerWrap.required = 1

				wrap = |
				field = startdate
			}

			enddate = TEXT
			enddate {
				innerWrap = {$plugin.tx_wecsermons_pi1.seriesEndDateHeader}
				innerWrap.wrap = |&nbsp;
				innerWrap.required = 1

				wrap = |
				field = enddate
			}

			season = TEXT
			season {
				innerWrap = {$plugin.tx_wecsermons_pi1.seasonHeader}
				innerWrap.wrap = |<br/>
				innerWrap.required = 1

				wrap = <div id="tx-wecsermons-pi1-season">|</div>

			}

		}

		tx_wecsermons_speakers {

			# If typolink is set, then we use this configuration to generate the link for the ###SPEAKER_LINK### TYPO tag.
			# If typolink = 0, then we generate a link to the speaker's single view
			typolink = 0
			typolink {
				parameter.field = url
				extTarget = _blank
			}

			# Allowed data columns to search in
			searchFieldList = fullname,firstname,lastname,email

			# Specify the ordering of records in list views
			# orderBy should only include one field!
			orderByList = fullname,firstname,lastname,email,crdate
			orderBy = lastname

			# Boolean, if set = 1 then order descending
			descFlag = 0

			photo = IMAGE
			photo {
			wrap = |
				file {
					import = uploads/tx_wecsermons/
					import.field = photo
					width = 64m
					height = 64m
				}
				imageLinkWrap = 1
				imageLinkWrap {
					enable = 1
					JSwindow = 1
					JSwindow.expand = 20,20
				}
			}

			fullname = TEXT
			fullname {
				wrap = |
				field = fullname
			}

			firstname = TEXT
			firstname {
				wrap = |
				field = firstname
			}

			lastname = TEXT
			lastname {
				wrap = |
				field = lastname
			}

			url = TEXT
			url {
				typolink.parameter.field = url
				wrap = |
				value = |
				field = url
			}

			email = TEXT
			email {
				typolink = 1
				typolink.parameter.field = email
				wrap = |
				field = email
			}

		}

		tx_wecsermons_topics {

			# Allowed data columns to search in
			searchFieldList = title,description

			# Specify the ordering of records in list views
			# orderBy should only include one field!
			orderByList = title,description,crdate
			orderBy = title

			# Boolean, if set = 1 then order descending
			descFlag = 0

			title = TEXT
			title {
				wrap = |
				field = title
			}

			description = TEXT
			description {
				crop = 75| &nbsp;...|1
				field = description
				stripHtml = 1
				trim = 1
				wrap = <p class="bodytext">|</p>
			}

		}

		tx_wecsermons_seasons {

			# Allowed data columns to search in
			searchFieldList = title,description

			# Specify the ordering of records in list views
			# orderBy should only include one field!
			orderByList = title,description,crdate
			orderBy = title

			# Boolean, if set = 1 then order descending
			descFlag = 0

			title = TEXT
			title {
				wrap = |
				field = title
			}

			description {
				crop = 150| &nbsp;...|1
				field = description
				stripHtml = 1
				trim = 1
				wrap = <p class="bodytext">|</p>
			}

		}

	}

	# *****************
	# Latest view configuration
	# *****************
	latestView < .listView
	latestView {

		maxdetailResults = {$plugin.tx_wecsermons_pi1.latestView.maxdetailResults}
		maxGroupResults = {$plugin.tx_wecsermons_pi1.latestView.maxGroupResults}
		emptyGroups = {$plugin.tx_wecsermons_pi1.latestView.emptyGroups}
		useCreationDate = {$plugin.tx_wecsermons_pi1.latestView.useCreationDate}

		tx_wecsermons_sermons {
			orderByList = occurrence_date,title,crdate
			orderBy = occurrence_date
			descFlag = 1
		}

		tx_wecsermons_series {
			orderByList = startdate,title,crdate
			orderBy = startdate
			descFlag = 1
		}

	}

	# *****************
	# Search view configuration
	# *****************
	searchView {

		# Allowed data columns to search in
		searchFieldList = title,description,scripture,keywords

		orderByList = occurrence_date,title
		orderBy = occurrence_date
		descFlag = 0

		#	List of table names we can search into from the search box (Future use)
		#searchTables = tx_wecsermons_sermons,tx_wecsermons_series,tx_wecsermons_speakers,tx_wecsermons_seasons,tx_wecsermons_resources,tx_wecsermons_topics

		searchFieldArray {

			tx_wecsermons_sermons.searchFieldList = title,description,scripture,keywords

		}

		# Error generated if piVars['sword'] is not set
		searchError = searchView() was called, but no sword value was found!
		searchError.wrap = <h1>|</h1>

		searchBoxOptions  = TEXT
		searchBoxOptions {
				wrap =
		}

		searchButtonName = TEXT
		searchButtonName {
			typolink =
		}
	}

	# *****************
	# XML view configuration
	# *****************
	xmlView < .listView
	xmlView {

		maxdetailResults = 5
		descFlag = 1
		orderByList = occurrence_date,title,crdate
		orderBy = occurrence_date
		
		# By setting this to 1, the XML feed will link to the single view of a resource rather than a single view of a sermon
		itemLinkToResource = {$plugin.tx_wecsermons_pi1.xmlView.itemLinkToResource}

		# TODO: allow multiple resource types here
		# TOTO: change to name of resource type specified in v.0.5.2 of extension
		#	EnclosureType specifies which custom resource type will be included as an <enclosure/> for podcasting.
		enclosureType = MP3

	}
}

[global]
podcast = PAGE
podcast {
	config {
		disableAllHeaderCode = 1
		additionalHeaders = Content-type:application/xml
		xhtml_cleaning = 0
		admPanel = 0
	}

	typeNum = 200
	10 = HTML
	10.value (
<?xml version="1.0"?>
	<rss version="2.0">
		<warning>If you are seeing this, you need to configure the podcast page by inserting TypoScript into the setup field of your template record.</warning>
		<recommendation>Please see the documentation provided with this Extension.</recommendation>
	</rss>
	)
}

vodcast < podcast
vodcast.typeNum = 201

plugin.tx_wecapi_list {

	tag_rendering {
		channel_link >
		channel_link = TEXT
		channel_link.data = field:channel_link
		channel_link.wrap = <link>|</link>

		item_title.field = title
		item_description {
			field = description
			if.isTrue.field = description
		}
		item_link.field = item_link
		item_comments.field = comments_link
		item_pubdate.field = occurrence_date
		item_guid.field = item_link
		item_source >
		item_enclosure.if.isTrue.field = enclosure_url
		item_itunes_summary.field = summary
		item_itunes_subtitle.field = subtitle
		item_itunes_duration.field = duration
		item_itunes_duration.if.isTrue.field = enclosure_url

	}

}

# Default CSS styles (this will go into the document header as a <link> tag):
page.includeCSS.tx_wecsermons_pi1 = {$plugin.tx_wecsermons_pi1.file.cssFile}

# Example of how to overrule LOCAL_LANG values for the plugin:
plugin.tx_wecsermons_pi1._LOCAL_LANG.default  {

	pi_list_searchBox_search = Search!
}
# Example of how to set default values from TS in the incoming array, $this->piVars of the plugin:
#plugin.tx_wecsermons_pi1._DEFAULT_PI_VARS.test = test
